{
    "openapi": "3.0.0",
    "info": {
        "title": "MegaSorpresa API",
        "description": "API Backend para el e-commerce de juguetes MegaSorpresa. Sirve a clientes Web (SPA), Android e iOS.",
        "contact": {
            "email": "api@megasorpresa.com"
        },
        "version": "1.0.0"
    },
    "servers": [
        {
            "url": "/",
            "description": "API Server"
        }
    ],
    "paths": {
        "/api/auth/login": {
            "post": {
                "tags": [
                    "Autenticación"
                ],
                "summary": "Login de usuario",
                "description": "Autenticación de usuarios para clientes móviles (Android/iOS). Retorna un Bearer Token.",
                "operationId": "dd51a484b7fa0f97c7680fdbde14cf5f",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "email",
                                    "password"
                                ],
                                "properties": {
                                    "email": {
                                        "type": "string",
                                        "format": "email",
                                        "example": "user@example.com"
                                    },
                                    "password": {
                                        "type": "string",
                                        "format": "password",
                                        "example": "password123"
                                    },
                                    "device_name": {
                                        "description": "Nombre del dispositivo (opcional)",
                                        "type": "string",
                                        "example": "iPhone 13"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Login exitoso",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "token": {
                                            "type": "string",
                                            "example": "1|abcdef123456..."
                                        },
                                        "user": {
                                            "properties": {
                                                "id": {
                                                    "type": "integer",
                                                    "example": 1
                                                },
                                                "name": {
                                                    "type": "string",
                                                    "example": "John Doe"
                                                },
                                                "email": {
                                                    "type": "string",
                                                    "example": "user@example.com"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Credenciales inválidas",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Invalid credentials"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/auth/logout": {
            "post": {
                "tags": [
                    "Autenticación"
                ],
                "summary": "Logout de usuario",
                "description": "Revoca el token actual del usuario autenticado",
                "operationId": "df9bdc6c7a6d9f20b983526b2ec0f698",
                "responses": {
                    "200": {
                        "description": "Logout exitoso",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Token revoked successfully"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado"
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/user": {
            "get": {
                "tags": [
                    "Autenticación"
                ],
                "summary": "Obtener usuario autenticado",
                "description": "Retorna la información del usuario autenticado",
                "operationId": "961ad57987905b44ae2e2f40b82e76de",
                "responses": {
                    "200": {
                        "description": "Usuario autenticado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "id": {
                                            "type": "integer",
                                            "example": 1
                                        },
                                        "name": {
                                            "type": "string",
                                            "example": "John Doe"
                                        },
                                        "email": {
                                            "type": "string",
                                            "example": "user@example.com"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado"
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/catalog/categories": {
            "get": {
                "tags": [
                    "Catálogo"
                ],
                "summary": "Listar todas las categorías",
                "description": "Obtiene un listado de todas las categorías de productos disponibles en el catálogo.",
                "operationId": "41c132c0cd1d2dbae3fbe9d046cc0923",
                "responses": {
                    "200": {
                        "description": "Listado de categorías obtenido exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "data": {
                                            "type": "array",
                                            "items": {
                                                "$ref": "#/components/schemas/Category"
                                            }
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/catalog/categories/{id}": {
            "get": {
                "tags": [
                    "Catálogo"
                ],
                "summary": "Obtener detalle de una categoría con sus productos",
                "description": "Obtiene la información de una categoría específica junto con sus productos asociados. Los productos se pueden filtrar por ciudad y están paginados.",
                "operationId": "de30548fbe81774b79d5d5615e90b7dd",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "ID de la categoría",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "example": 1
                        }
                    },
                    {
                        "name": "city_id",
                        "in": "query",
                        "description": "ID de la ciudad para filtrar productos por disponibilidad",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "example": 1
                        }
                    },
                    {
                        "name": "per_page",
                        "in": "query",
                        "description": "Número de productos por página",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "default": 15,
                            "example": 15
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Detalle de la categoría con productos obtenido exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "category": {
                                            "$ref": "#/components/schemas/Category"
                                        },
                                        "products": {
                                            "type": "array",
                                            "items": {
                                                "$ref": "#/components/schemas/Product"
                                            }
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Categoría no encontrada",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/NotFoundError"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/coupons/validate": {
            "post": {
                "tags": [
                    "Cupones"
                ],
                "summary": "Validar un cupón de descuento",
                "description": "Valida un código de cupón y calcula el descuento aplicable según el subtotal proporcionado. Verifica que el cupón sea válido, no esté expirado y cumpla con los requisitos mínimos.",
                "operationId": "ddaeac30cd91fbf6ab48e61f87ade17f",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "code",
                                    "subtotal"
                                ],
                                "properties": {
                                    "code": {
                                        "description": "Código del cupón a validar",
                                        "type": "string",
                                        "example": "PROMO2026"
                                    },
                                    "subtotal": {
                                        "description": "Subtotal de la orden antes del descuento",
                                        "type": "number",
                                        "format": "float",
                                        "minimum": 0,
                                        "example": 150
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Cupón validado exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "valid": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "discount_type": {
                                            "type": "string",
                                            "enum": [
                                                "percentage",
                                                "fixed"
                                            ],
                                            "example": "percentage"
                                        },
                                        "discount_value": {
                                            "type": "number",
                                            "format": "float",
                                            "example": 10
                                        },
                                        "discount_amount": {
                                            "description": "Monto del descuento calculado",
                                            "type": "number",
                                            "format": "float",
                                            "example": 15
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Cupón válido"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/UnauthorizedError"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Cupón inválido o datos de validación incorrectos",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "oneOf": [
                                        {
                                            "$ref": "#/components/schemas/ValidationError"
                                        },
                                        {
                                            "properties": {
                                                "valid": {
                                                    "type": "boolean",
                                                    "example": false
                                                },
                                                "message": {
                                                    "type": "string",
                                                    "example": "Cupón expirado o inválido"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    ]
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/orders": {
            "get": {
                "tags": [
                    "Órdenes"
                ],
                "summary": "Listar órdenes del usuario autenticado",
                "description": "Obtiene un listado de todas las órdenes realizadas por el usuario autenticado.",
                "operationId": "955bb77a45ae173a485fadb8befed93f",
                "responses": {
                    "200": {
                        "description": "Listado de órdenes obtenido exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "data": {
                                            "type": "array",
                                            "items": {
                                                "$ref": "#/components/schemas/Order"
                                            }
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/UnauthorizedError"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            },
            "post": {
                "tags": [
                    "Órdenes"
                ],
                "summary": "Crear una nueva orden (Checkout)",
                "description": "Procesa una nueva orden de compra. Valida stock, aplica cupones si corresponde, y crea la orden con todos sus items.",
                "operationId": "2123ba58dadb22bd6f2c8081af562230",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "items",
                                    "recipient_name",
                                    "recipient_phone",
                                    "delivery_date"
                                ],
                                "properties": {
                                    "items": {
                                        "description": "Lista de productos a ordenar",
                                        "type": "array",
                                        "items": {
                                            "required": [
                                                "product_id",
                                                "quantity"
                                            ],
                                            "properties": {
                                                "product_id": {
                                                    "type": "integer",
                                                    "example": 1
                                                },
                                                "quantity": {
                                                    "type": "integer",
                                                    "minimum": 1,
                                                    "example": 2
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "coupon_code": {
                                        "description": "Código de cupón de descuento (opcional)",
                                        "type": "string",
                                        "example": "PROMO2026"
                                    },
                                    "recipient_name": {
                                        "type": "string",
                                        "maxLength": 255,
                                        "example": "María García"
                                    },
                                    "recipient_phone": {
                                        "type": "string",
                                        "maxLength": 20,
                                        "example": "+1234567890"
                                    },
                                    "delivery_date": {
                                        "description": "Fecha de entrega (debe ser posterior a hoy)",
                                        "type": "string",
                                        "format": "date",
                                        "example": "2026-02-15"
                                    },
                                    "delivery_slot_id": {
                                        "description": "ID del horario de entrega (opcional)",
                                        "type": "integer",
                                        "example": 1
                                    },
                                    "card_message": {
                                        "description": "Mensaje para la tarjeta (opcional)",
                                        "type": "string",
                                        "maxLength": 500,
                                        "example": "¡Feliz cumpleaños!"
                                    },
                                    "payment_method": {
                                        "description": "Método de pago (opcional)",
                                        "type": "string",
                                        "enum": [
                                            "cash",
                                            "card",
                                            "transfer"
                                        ],
                                        "example": "card"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Orden creada exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "data": {
                                            "$ref": "#/components/schemas/Order"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/UnauthorizedError"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Datos de validación inválidos o fallo al crear la orden",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "oneOf": [
                                        {
                                            "$ref": "#/components/schemas/ValidationError"
                                        },
                                        {
                                            "properties": {
                                                "message": {
                                                    "type": "string",
                                                    "example": "Failed to create order"
                                                },
                                                "error": {
                                                    "type": "string",
                                                    "example": "Insufficient stock for product"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    ]
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/orders/{id}": {
            "get": {
                "tags": [
                    "Órdenes"
                ],
                "summary": "Obtener detalle de una orden específica",
                "description": "Obtiene la información completa de una orden específica. El usuario solo puede ver sus propias órdenes.",
                "operationId": "88d27387b1e409e075c18609d4a0c300",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "ID de la orden",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "example": 1
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Detalle de la orden obtenido exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "data": {
                                            "$ref": "#/components/schemas/Order"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/UnauthorizedError"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "No autorizado para ver esta orden",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ForbiddenError"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Orden no encontrada",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/NotFoundError"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/catalog/products": {
            "get": {
                "tags": [
                    "Catálogo"
                ],
                "summary": "Listar productos del catálogo",
                "description": "Obtiene un listado paginado de productos con filtros opcionales por ciudad, categoría y búsqueda. Los productos se filtran por disponibilidad en la ciudad especificada.",
                "operationId": "16d32315eaac159466bce226dcaad470",
                "parameters": [
                    {
                        "name": "city_id",
                        "in": "query",
                        "description": "ID de la ciudad para filtrar productos por disponibilidad",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "example": 1
                        }
                    },
                    {
                        "name": "category_id",
                        "in": "query",
                        "description": "ID de la categoría para filtrar productos",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "example": 1
                        }
                    },
                    {
                        "name": "search",
                        "in": "query",
                        "description": "Término de búsqueda para filtrar productos por nombre o descripción",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "muñeca"
                        }
                    },
                    {
                        "name": "per_page",
                        "in": "query",
                        "description": "Número de productos por página (paginación)",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "default": 15,
                            "example": 15
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Listado de productos obtenido exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "data": {
                                            "type": "array",
                                            "items": {
                                                "$ref": "#/components/schemas/Product"
                                            }
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/catalog/products/featured": {
            "get": {
                "tags": [
                    "Catálogo"
                ],
                "summary": "Listar productos destacados",
                "description": "Obtiene un listado de productos destacados para una ciudad específica. Útil para mostrar productos en la página principal.",
                "operationId": "ef7353267102607463681d1d87a9b85f",
                "parameters": [
                    {
                        "name": "city_id",
                        "in": "query",
                        "description": "ID de la ciudad para obtener productos destacados",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "default": 1,
                            "example": 1
                        }
                    },
                    {
                        "name": "limit",
                        "in": "query",
                        "description": "Número máximo de productos destacados a retornar",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "default": 10,
                            "example": 10
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Listado de productos destacados obtenido exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "data": {
                                            "type": "array",
                                            "items": {
                                                "$ref": "#/components/schemas/Product"
                                            }
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/catalog/products/{id}": {
            "get": {
                "tags": [
                    "Catálogo"
                ],
                "summary": "Obtener detalle de un producto",
                "description": "Obtiene la información completa de un producto específico, incluyendo imágenes, categorías y reseñas.",
                "operationId": "ed75756d0f7ac8d74374f8fff04d19bb",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "ID del producto",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "example": 1
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Detalle del producto obtenido exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "data": {
                                            "$ref": "#/components/schemas/Product"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Producto no encontrado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/NotFoundError"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/reviews": {
            "get": {
                "tags": [
                    "Reseñas"
                ],
                "summary": "Listar reseñas de un producto",
                "description": "Obtiene todas las reseñas aprobadas de un producto específico. Se requiere el parámetro product_id.",
                "operationId": "9cfedb9e60a10482ea2d0017aa8b381d",
                "parameters": [
                    {
                        "name": "product_id",
                        "in": "query",
                        "description": "ID del producto para obtener sus reseñas",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "example": 1
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Listado de reseñas obtenido exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "data": {
                                            "type": "array",
                                            "items": {
                                                "properties": {
                                                    "id": {
                                                        "type": "integer",
                                                        "example": 1
                                                    },
                                                    "product_id": {
                                                        "type": "integer",
                                                        "example": 1
                                                    },
                                                    "user_id": {
                                                        "type": "integer",
                                                        "example": 5
                                                    },
                                                    "rating": {
                                                        "type": "integer",
                                                        "maximum": 5,
                                                        "minimum": 1,
                                                        "example": 5
                                                    },
                                                    "comment": {
                                                        "type": "string",
                                                        "example": "Excelente producto, muy recomendado"
                                                    },
                                                    "is_approved": {
                                                        "type": "boolean",
                                                        "example": true
                                                    },
                                                    "created_at": {
                                                        "type": "string",
                                                        "format": "date-time"
                                                    }
                                                },
                                                "type": "object"
                                            }
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Falta el parámetro product_id",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Product ID is required"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                }
            },
            "post": {
                "tags": [
                    "Reseñas"
                ],
                "summary": "Crear una nueva reseña",
                "description": "Permite a un usuario autenticado crear una reseña para un producto. La reseña requiere aprobación antes de ser visible públicamente.",
                "operationId": "f9bf17f06508aa2dd6aecbb9771092da",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "product_id",
                                    "rating"
                                ],
                                "properties": {
                                    "product_id": {
                                        "description": "ID del producto a reseñar",
                                        "type": "integer",
                                        "example": 1
                                    },
                                    "rating": {
                                        "description": "Calificación del producto (1-5 estrellas)",
                                        "type": "integer",
                                        "maximum": 5,
                                        "minimum": 1,
                                        "example": 5
                                    },
                                    "comment": {
                                        "description": "Comentario de la reseña (opcional)",
                                        "type": "string",
                                        "maxLength": 1000,
                                        "example": "Excelente producto, muy recomendado"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Reseña creada exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "data": {
                                            "properties": {
                                                "id": {
                                                    "type": "integer",
                                                    "example": 1
                                                },
                                                "product_id": {
                                                    "type": "integer",
                                                    "example": 1
                                                },
                                                "rating": {
                                                    "type": "integer",
                                                    "example": 5
                                                },
                                                "comment": {
                                                    "type": "string",
                                                    "example": "Excelente producto"
                                                },
                                                "is_approved": {
                                                    "type": "boolean",
                                                    "example": false
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/UnauthorizedError"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Datos de validación inválidos",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ValidationError"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/reviews/average": {
            "get": {
                "tags": [
                    "Reseñas"
                ],
                "summary": "Obtener calificación promedio de un producto",
                "description": "Calcula y retorna la calificación promedio de todas las reseñas aprobadas de un producto específico.",
                "operationId": "2ac53ca7c17e82fedb9da722adf0eebc",
                "parameters": [
                    {
                        "name": "product_id",
                        "in": "query",
                        "description": "ID del producto para obtener su calificación promedio",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "example": 1
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Calificación promedio obtenida exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "product_id": {
                                            "type": "integer",
                                            "example": 1
                                        },
                                        "average_rating": {
                                            "description": "Promedio de calificaciones (0-5)",
                                            "type": "number",
                                            "format": "float",
                                            "example": 4.5
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Falta el parámetro product_id",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Product ID is required"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/auth/register": {
            "post": {
                "tags": [
                    "Autenticación"
                ],
                "summary": "Registrar un nuevo usuario",
                "description": "Crea una nueva cuenta de usuario y retorna un token de autenticación. El usuario queda automáticamente autenticado tras el registro.",
                "operationId": "40c73e3fee077f80e1fbad6877f9a74f",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "name",
                                    "email",
                                    "password",
                                    "password_confirmation"
                                ],
                                "properties": {
                                    "name": {
                                        "type": "string",
                                        "maxLength": 255,
                                        "example": "John Doe"
                                    },
                                    "email": {
                                        "type": "string",
                                        "format": "email",
                                        "maxLength": 255,
                                        "example": "newuser@example.com"
                                    },
                                    "password": {
                                        "description": "Contraseña (mínimo 8 caracteres)",
                                        "type": "string",
                                        "format": "password",
                                        "minLength": 8,
                                        "example": "password123"
                                    },
                                    "password_confirmation": {
                                        "description": "Confirmación de contraseña",
                                        "type": "string",
                                        "format": "password",
                                        "example": "password123"
                                    },
                                    "first_name": {
                                        "description": "Nombre (opcional)",
                                        "type": "string",
                                        "maxLength": 255,
                                        "example": "John"
                                    },
                                    "last_name": {
                                        "description": "Apellido (opcional)",
                                        "type": "string",
                                        "maxLength": 255,
                                        "example": "Doe"
                                    },
                                    "phone": {
                                        "description": "Teléfono (opcional)",
                                        "type": "string",
                                        "maxLength": 20,
                                        "example": "+1234567890"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Usuario registrado exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "token": {
                                            "type": "string",
                                            "example": "1|abcdef123456..."
                                        },
                                        "user": {
                                            "$ref": "#/components/schemas/User"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Datos de validación inválidos",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ValidationError"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/user/profile": {
            "put": {
                "tags": [
                    "Perfil de Usuario"
                ],
                "summary": "Actualizar perfil de usuario",
                "description": "Actualiza la información del perfil del usuario autenticado. Todos los campos son opcionales.",
                "operationId": "f5dfce3753e793253c65d12b593248a3",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "name": {
                                        "type": "string",
                                        "maxLength": 255,
                                        "example": "John Doe Updated"
                                    },
                                    "email": {
                                        "description": "Email (debe ser único)",
                                        "type": "string",
                                        "format": "email",
                                        "maxLength": 255,
                                        "example": "newemail@example.com"
                                    },
                                    "first_name": {
                                        "type": "string",
                                        "maxLength": 255,
                                        "example": "John"
                                    },
                                    "last_name": {
                                        "type": "string",
                                        "maxLength": 255,
                                        "example": "Doe"
                                    },
                                    "phone": {
                                        "type": "string",
                                        "maxLength": 20,
                                        "example": "+1234567890"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Perfil actualizado exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "data": {
                                            "$ref": "#/components/schemas/User"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/UnauthorizedError"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Datos de validación inválidos",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ValidationError"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/user/addresses": {
            "get": {
                "tags": [
                    "Perfil de Usuario"
                ],
                "summary": "Listar direcciones del usuario",
                "description": "Obtiene todas las direcciones guardadas del usuario autenticado.",
                "operationId": "315a13c095465d7fd2d5714232bd0ddc",
                "responses": {
                    "200": {
                        "description": "Listado de direcciones obtenido exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "data": {
                                            "type": "array",
                                            "items": {
                                                "properties": {
                                                    "id": {
                                                        "type": "integer",
                                                        "example": 1
                                                    },
                                                    "street": {
                                                        "type": "string",
                                                        "example": "Av. Principal 123"
                                                    },
                                                    "ext_number": {
                                                        "type": "string",
                                                        "example": "123A"
                                                    },
                                                    "neighborhood": {
                                                        "type": "string",
                                                        "example": "Centro"
                                                    },
                                                    "city_id": {
                                                        "type": "integer",
                                                        "example": 1
                                                    },
                                                    "zip_code": {
                                                        "type": "string",
                                                        "example": "12345"
                                                    },
                                                    "references": {
                                                        "type": "string",
                                                        "example": "Casa blanca con portón negro"
                                                    }
                                                },
                                                "type": "object"
                                            }
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/UnauthorizedError"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            },
            "post": {
                "tags": [
                    "Perfil de Usuario"
                ],
                "summary": "Agregar una nueva dirección",
                "description": "Crea una nueva dirección de entrega para el usuario autenticado.",
                "operationId": "08b55b9f8f53ada97f060c047d796ea8",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "street",
                                    "city_id"
                                ],
                                "properties": {
                                    "street": {
                                        "type": "string",
                                        "maxLength": 255,
                                        "example": "Av. Principal 123"
                                    },
                                    "ext_number": {
                                        "description": "Número exterior (opcional)",
                                        "type": "string",
                                        "maxLength": 50,
                                        "example": "123A"
                                    },
                                    "neighborhood": {
                                        "description": "Colonia (opcional)",
                                        "type": "string",
                                        "maxLength": 255,
                                        "example": "Centro"
                                    },
                                    "city_id": {
                                        "description": "ID de la ciudad",
                                        "type": "integer",
                                        "example": 1
                                    },
                                    "zip_code": {
                                        "description": "Código postal (opcional)",
                                        "type": "string",
                                        "maxLength": 10,
                                        "example": "12345"
                                    },
                                    "references": {
                                        "description": "Referencias adicionales (opcional)",
                                        "type": "string",
                                        "maxLength": 500,
                                        "example": "Casa blanca con portón negro"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Dirección creada exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "data": {
                                            "properties": {
                                                "id": {
                                                    "type": "integer",
                                                    "example": 1
                                                },
                                                "street": {
                                                    "type": "string",
                                                    "example": "Av. Principal 123"
                                                },
                                                "ext_number": {
                                                    "type": "string",
                                                    "example": "123A"
                                                },
                                                "city_id": {
                                                    "type": "integer",
                                                    "example": 1
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/UnauthorizedError"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Datos de validación inválidos",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ValidationError"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/user/reminders": {
            "get": {
                "tags": [
                    "Perfil de Usuario"
                ],
                "summary": "Listar recordatorios del usuario",
                "description": "Obtiene todos los recordatorios de eventos especiales del usuario autenticado.",
                "operationId": "0d7fdf188ed5931fd935384218ec7243",
                "responses": {
                    "200": {
                        "description": "Listado de recordatorios obtenido exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "data": {
                                            "type": "array",
                                            "items": {
                                                "properties": {
                                                    "id": {
                                                        "type": "integer",
                                                        "example": 1
                                                    },
                                                    "event_name": {
                                                        "type": "string",
                                                        "example": "Cumpleaños de María"
                                                    },
                                                    "date": {
                                                        "type": "string",
                                                        "format": "date",
                                                        "example": "2026-06-15"
                                                    },
                                                    "notify_days_before": {
                                                        "type": "integer",
                                                        "example": 7
                                                    }
                                                },
                                                "type": "object"
                                            }
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/UnauthorizedError"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            },
            "post": {
                "tags": [
                    "Perfil de Usuario"
                ],
                "summary": "Crear un nuevo recordatorio",
                "description": "Crea un nuevo recordatorio de evento especial para el usuario autenticado. Útil para recordar cumpleaños u otros eventos importantes.",
                "operationId": "93afcbb15a99f499198bd34288b41b89",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "event_name",
                                    "date"
                                ],
                                "properties": {
                                    "event_name": {
                                        "description": "Nombre del evento",
                                        "type": "string",
                                        "maxLength": 255,
                                        "example": "Cumpleaños de María"
                                    },
                                    "date": {
                                        "description": "Fecha del evento (debe ser posterior a hoy)",
                                        "type": "string",
                                        "format": "date",
                                        "example": "2026-06-15"
                                    },
                                    "notify_days_before": {
                                        "description": "Días antes del evento para recibir notificación (opcional, por defecto 7)",
                                        "type": "integer",
                                        "maximum": 365,
                                        "minimum": 1,
                                        "example": 7
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Recordatorio creado exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "data": {
                                            "properties": {
                                                "id": {
                                                    "type": "integer",
                                                    "example": 1
                                                },
                                                "event_name": {
                                                    "type": "string",
                                                    "example": "Cumpleaños de María"
                                                },
                                                "date": {
                                                    "type": "string",
                                                    "format": "date",
                                                    "example": "2026-06-15"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/UnauthorizedError"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Datos de validación inválidos",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ValidationError"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        }
    },
    "components": {
        "schemas": {
            "Product": {
                "title": "Product",
                "description": "Modelo de producto",
                "properties": {
                    "id": {
                        "type": "integer",
                        "example": 1
                    },
                    "name": {
                        "type": "string",
                        "example": "Muñeca Barbie"
                    },
                    "slug": {
                        "type": "string",
                        "example": "muneca-barbie"
                    },
                    "sku": {
                        "type": "string",
                        "example": "TOY-001"
                    },
                    "base_price": {
                        "type": "number",
                        "format": "float",
                        "example": 29.99
                    },
                    "description": {
                        "type": "string",
                        "example": "Muñeca Barbie original con accesorios"
                    },
                    "stock_quantity": {
                        "type": "integer",
                        "example": 50
                    },
                    "is_active": {
                        "type": "boolean",
                        "example": true
                    },
                    "primary_image": {
                        "type": "string",
                        "example": "https://example.com/images/product.jpg"
                    },
                    "created_at": {
                        "type": "string",
                        "format": "date-time"
                    },
                    "updated_at": {
                        "type": "string",
                        "format": "date-time"
                    }
                },
                "type": "object"
            },
            "Category": {
                "title": "Category",
                "description": "Modelo de categoría",
                "properties": {
                    "id": {
                        "type": "integer",
                        "example": 1
                    },
                    "name": {
                        "type": "string",
                        "example": "Muñecas"
                    },
                    "slug": {
                        "type": "string",
                        "example": "munecas"
                    },
                    "description": {
                        "type": "string",
                        "example": "Muñecas y accesorios"
                    },
                    "is_active": {
                        "type": "boolean",
                        "example": true
                    }
                },
                "type": "object"
            },
            "Order": {
                "title": "Order",
                "description": "Modelo de orden",
                "properties": {
                    "id": {
                        "type": "integer",
                        "example": 1
                    },
                    "tracking_number": {
                        "type": "string",
                        "example": "MS-0000000001"
                    },
                    "status": {
                        "properties": {
                            "id": {
                                "type": "integer",
                                "example": 1
                            },
                            "name": {
                                "type": "string",
                                "example": "pending"
                            }
                        },
                        "type": "object"
                    },
                    "total_amount": {
                        "type": "number",
                        "format": "float",
                        "example": 99.99
                    },
                    "shipping_cost": {
                        "type": "number",
                        "format": "float",
                        "example": 5.99
                    },
                    "payment_method": {
                        "type": "string",
                        "example": "card"
                    },
                    "created_at": {
                        "type": "string",
                        "format": "date-time"
                    },
                    "updated_at": {
                        "type": "string",
                        "format": "date-time"
                    }
                },
                "type": "object"
            },
            "User": {
                "title": "User",
                "description": "Modelo de usuario",
                "properties": {
                    "id": {
                        "type": "integer",
                        "example": 1
                    },
                    "name": {
                        "type": "string",
                        "example": "John Doe"
                    },
                    "first_name": {
                        "type": "string",
                        "example": "John"
                    },
                    "last_name": {
                        "type": "string",
                        "example": "Doe"
                    },
                    "email": {
                        "type": "string",
                        "format": "email",
                        "example": "user@example.com"
                    },
                    "phone": {
                        "type": "string",
                        "example": "+1234567890"
                    },
                    "loyalty_points": {
                        "type": "integer",
                        "example": 100
                    },
                    "created_at": {
                        "type": "string",
                        "format": "date-time"
                    }
                },
                "type": "object"
            },
            "ValidationError": {
                "title": "Validation Error",
                "description": "Error de validación (422)",
                "properties": {
                    "message": {
                        "type": "string",
                        "example": "The given data was invalid."
                    },
                    "errors": {
                        "type": "object",
                        "example": {
                            "email": [
                                "The email field is required."
                            ]
                        },
                        "additionalProperties": {
                            "type": "array",
                            "items": {
                                "type": "string"
                            }
                        }
                    }
                },
                "type": "object"
            },
            "UnauthorizedError": {
                "title": "Unauthorized Error",
                "description": "Error de autenticación (401)",
                "properties": {
                    "message": {
                        "type": "string",
                        "example": "Unauthenticated."
                    }
                },
                "type": "object"
            },
            "NotFoundError": {
                "title": "Not Found Error",
                "description": "Recurso no encontrado (404)",
                "properties": {
                    "message": {
                        "type": "string",
                        "example": "Resource not found."
                    }
                },
                "type": "object"
            },
            "ForbiddenError": {
                "title": "Forbidden Error",
                "description": "Acceso prohibido (403)",
                "properties": {
                    "message": {
                        "type": "string",
                        "example": "Unauthorized access."
                    }
                },
                "type": "object"
            }
        },
        "securitySchemes": {
            "sanctum": {
                "type": "http",
                "description": "Token de autenticación de Laravel Sanctum para clientes móviles",
                "bearerFormat": "Token",
                "scheme": "bearer"
            }
        }
    },
    "tags": [
        {
            "name": "Autenticación",
            "description": "Endpoints de autenticación para clientes móviles y web"
        },
        {
            "name": "Catálogo",
            "description": "Endpoints para gestión de productos y categorías"
        },
        {
            "name": "Órdenes",
            "description": "Endpoints para gestión de órdenes de compra (Checkout)"
        },
        {
            "name": "Perfil de Usuario",
            "description": "Endpoints para gestión del perfil, direcciones y recordatorios"
        },
        {
            "name": "Reseñas",
            "description": "Endpoints para gestión de reseñas de productos"
        },
        {
            "name": "Cupones",
            "description": "Endpoints para validación de cupones de descuento"
        }
    ]
}